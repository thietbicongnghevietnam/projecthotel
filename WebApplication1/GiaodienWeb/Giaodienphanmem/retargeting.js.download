(function(b){if(!b.eClick)try{(function(d,u,B,w){function y(l,q){function g(){if(b)l.apply(q,arguments);else return a.push(arguments),!1}var b=!1,a=[];g.setReady=function(){b=!0;for(var g=0,d=a.length;g<d;++g)l.apply(q,a[g])};return g}function z(l,b,g){l.addEventListener?l.addEventListener(b,g,!1):l.attachEvent?l.attachEvent("on"+b,g):l["on"+b]=g}var v;(function(b,d){var g=!1,n=!0,a=b.document,m=a.documentElement,p=a.addEventListener?"addEventListener":"attachEvent",r=a.addEventListener?"removeEventListener":
"detachEvent",k=a.addEventListener?"":"on",h=function(e){if("readystatechange"!=e.type||"complete"==a.readyState)("load"==e.type?b:a)[r](k+e.type,h,!1),!g&&(g=!0,d.call(b,e.type||e))},e=function(){try{m.doScroll("left")}catch(b){setTimeout(e,50);return}h("poll")};if("complete"==a.readyState)d.call(b,"lazy");else{if(a.createEventObject&&m.doScroll){try{n=!b.frameElement}catch(x){}n&&e()}a[p](k+"DOMContentLoaded",h,!1);a[p](k+"readystatechange",h,!1);b[p](k+"load",h,!1)}})(b,function(){v=function(d,
q,g){var n=("https:"==document.location.protocol?"https:":"http:")+"//s.eclick.vn/delivery/lookup.html",a=!!b.postMessage&&!!b.localStorage&&!!b.JSON,m,p=0,r=!1,k=function(e){var a="adFreCb"+ ++p;b[a]=e;return a},h=y(function(e,a){m.postMessage(g.stringify({action:"targeting",key:e,callback:k(a)}),"*")});a&&(m=function(){z(b,"message",function(a){try{if(a.origin.match(/eclick/ig)){var e=g.parse(a.data),d=b[e.callback];"function"==typeof d&&d(e.data)}}catch(h){console.error("exception while processing message from proxy",
h)}});var a=document.createElement("iframe");a.src=n;a.id="eclick_sf";a.name="eclick_sf";a.width=0;a.height=0;a.style.display="none";document.body.appendChild(a);a.onload=function(){r=!0;h.setReady()};return a.contentWindow}());return a?{isSupported:function(){return a},isReady:function(){return r},getVid:h}:{isSupported:function(){return!1},isReady:function(){return!1},getVid:function(a,b){b(null)}}}(b.postMessage,b.localStorage,b.JSON);v.getVid("fosp_aid",function(b){function q(a,b){var c=function(){a.detachEvent?
a.detachEvent("onload",c):a.onload=null;b()};a.attachEvent?a.attachEvent("onload",c):a.onload=c}function g(a,b){var c="fb"+Math.random().toString().replace(".",""),f=u.createElement("form");f.method="post";f.action=a;f.target=c;f.acceptCharset="utf-8";f.style.display="none";var e=u.createElement(d.attachEvent&&!d.addEventListener?'<iframe name="'+c+'">':"iframe");e.src="javascript:false";e.id=c;e.name=c;f.appendChild(e);q(e,function(){for(var a=0,c=b.length;a<c;a++){var A=u.createElement("input");
A.name=b[a][0];A.value=b[a][1];f.appendChild(A)}q(e,function(){f.parentNode.removeChild(f)});f.submit()});u.body.appendChild(f)}function n(a,e,c){var f=[];f.push(["fosp_aid",b.fosp_aid]);f.push(["uid",a]);f.push(["ev",e]);f.push(["dl",x]);f.push(["rl",v]);f.push(["if",y]);f.push(["ts",(new Date).valueOf()]);if(c&&"object"===typeof c)for(var d in c)if(c.hasOwnProperty(d)){a=c[d];var h=null===a?"null":typeof a;h in{number:1,string:1,"boolean":1}?f.push(["cd["+encodeURIComponent(d)+"]",a]):"object"===
h&&(a="undefined"===typeof JSON?String(a):JSON.stringify(a),f.push(["cd["+encodeURIComponent(d)+"]",a]))}c=[];d=0;for(a=f.length;d<a;d++)c.push(f[d][0]+"="+encodeURIComponent(f[d][1]));c=c.join("&");"conversion"===e?k=r:k=p;2048>(k+"?"+c).length?(new Image).src=k+"?"+c:g(k,f)}var a=d._eclickq||(d._eclickq=[]);if(a.push===Array.prototype.push){var m=/^\d+$/,p=("https:"==document.location.protocol?"https:":"http:")+"//r.eclick.vn/track",r=("https:"==document.location.protocol?"https:":"http:")+"//r.eclick.vn/conversion",
k="",h={},e=[],x=B.href,v=u.referrer,y=d.top!==d;h.addPixelId=function(a){e.push(a)};h.track=function(a,b){var c=typeof a;if("string"!==c&&"number"!==c)return!1;if(m.test(a))return n(null,a,b),!0;for(var c=0,d=e.length;c<d;c++)n(e[c],a,b);return 0<e.length};for(var s=function(a){if("[object Array]"!==Object.prototype.toString.call(a))return!1;var b=a.shift();if(!b)return!1;b=h[b];if("function"!==typeof b)return!1;if(d._fbds){var c=d._fbds.pixelId;m.test(c)&&(e.push(c),delete d._fbds.pixelId)}return b.apply(h,
a)},t=0,z=a.length;t<z;++t)s(a[t]);a.push=s;!0!==a.disablePushState&&w.pushState&&w.replaceState&&(s=function(){v=x;x=B.href;a.push(["track","PixelInitialized"])},t=function(a,b,c){var d=a[b];a[b]=function(){var a=d.apply(this,arguments);c.apply(this,arguments);return a}},t(w,"pushState",s),t(w,"replaceState",s),d.addEventListener("popstate",s,!1))}})})})(b,document,location,history)}catch(C){}})(window);
